/*!
 * cdp.framework.jqm.js 1.1.4
 *
 * Date: 2015-08-26T14:28:55
 */
!function(a,b){"function"==typeof define&&define.amd?define(["cdp.core","cdp.lazyload","i18n"],function(){return b(a.CDP||(a.CDP={}))}):b(a.CDP||(a.CDP={}))}(this,function(a){a.Framework=a.Framework||{};var a;!function(a){var b;!function(b){b.Platform=function(){var b=navigator.userAgent.toLowerCase(),c=function(a){var c=b.match(new RegExp("("+a+")( |/)([0-9]+)"));return!c||c.length<4?0:parseInt(c[3],10)};return{ltIE6:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.documentElement.style.maxHeight,ltIE7:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.querySelectorAll,ltIE8:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.getElementsByClassName,ltIE9:document.uniqueID&&"undefined"==typeof window.matchMedia,gtIE10:document.uniqueID&&window.matchMedia,Trident:document.uniqueID,Gecko:"MozAppearance"in document.documentElement.style,Presto:a.global.opera,Blink:a.global.chrome,Webkit:"undefined"==typeof a.global.chrome&&"WebkitAppearance"in document.documentElement.style,Touch:"undefined"!=typeof a.global.ontouchstart,Mobile:"undefined"!=typeof a.global.orientation,ltAd4_4:"undefined"!=typeof a.global.orientation&&("undefined"==typeof a.global.EventSource||30>c("chrome")),Pointer:a.global.navigator.pointerEnabled,MSPoniter:a.global.navigator.msPointerEnabled,Android:-1!==b.indexOf("android"),iOS:-1!==b.indexOf("iphone")||-1!==b.indexOf("ipad")||-1!==b.indexOf("ipod")}}()}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){var a=$.fn.on,b=$.fn.off,c=function(b,c,d,e,f){return"string"==typeof b&&(b=b.replace(/vclick/g,"click")),_.bind(a,this)(b,c,d,e,f)},d=function(a,c,d){return"string"==typeof a&&(a=a.replace(/vclick/g,"click")),_.bind(b,this)(a,c,d)};$.fn.on=c,$.fn.off=d},c=function(){function c(){}return c.apply=function(){c.isSupportedVclick()||(b(),c.s_vclickEvent="click")},c.isSupportedVclick=function(){return a.Platform.Android&&!a.Platform.ltAd4_4?!1:!0},c.s_vclickEvent="vclick",c}();a.Patch=c}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(a){function b(){var a=$(window);return a.width()<a.height()?c.PORTRAIT:c.LANDSCAPE}!function(a){a[a.PORTRAIT=0]="PORTRAIT",a[a.LANDSCAPE=1]="LANDSCAPE"}(a.Orientation||(a.Orientation={}));var c=a.Orientation;a.getOrientation=b}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(b){function c(b){if(null!=b[0]&&"/"===b[0]){var c=location.href.split(a.webRoot)[0]+a.webRoot;return c+b}return $.mobile.path.makeUrlAbsolute(b,d())}function d(){var a=$("body").pagecontainer("getActivePage");if(null==a)return $.mobile.path.documentBase.hrefNoHash;var b=$.mobile.activePage.closest(".ui-page").jqmData("url"),c=$.mobile.path.documentBase.hrefNoHash;return b&&$.mobile.path.isPath(b)||(b=c),$.mobile.path.makeUrlAbsolute(b,c)}function e(a){if(null==a)return f;var b=f;return f=a,b}b.toUrl=c;var f=function(){return $.Deferred().resolve().promise()},g=f;b.setBeforeRouteChangeHandler=e;var h=function(){function c(){}return c.initialize=function(a){var d=$("body");return c.s_router?(console.warn("logic error. initialize call twice."),!1):(c.s_initOptions=$.extend({},c.s_defaultInitOptions,a),c.s_loadUrl=_.bind(Backbone.history.loadUrl,Backbone.history),Backbone.history.loadUrl=c.customLoadUrl,c.s_router=new Backbone.Router,c.s_router.on("route",c.onRouteSucceeded),$.mobile.hashListeningEnabled||(c.s_back=_.bind($.mobile.back,$.mobile),$.mobile.back=c.customJqmBack),null==$.mobile.changePage&&($.mobile.changePage=function(a,b){d.pagecontainer("change",a,b)}),c.bindEvents(),b.setupEventHandlers(),!0)},c.register=function(a,b,d,e){void 0===d&&(d=!1);var f=c.stop(),g=a+b,h={route:a,regexp:c.s_router._routeToRegExp(a),page:b,top:d,callback:e||function(){return!1}};return c.pushContext(g,h)&&c.s_router.route(a,g,function(){}),f&&c.start({silent:!0}),c},c.start=function(a){return $.mobile.hashListeningEnabled?(console.log("setting error. confict: $.mobile.hashListeningEnabled = true, cannot start."),!1):Backbone.history.start(a)},c.stop=function(){var a=Backbone.History.started;return Backbone.history.stop(),a},c.isRouting=function(){return Backbone.History.started},c.navigate=function(a,b,d,e){if(c.s_lastNavigateInfo.inNavigation)return void console.log("Router.navigate() called in navigation proc.");if(!c.initFirstPageIfNeeded(a)){var h=$.extend({},c.s_defaultNavigateOptions,e),i=c.s_lastNavigateInfo.calledBeforeRouteChange?g:f;c.s_lastNavigateInfo={url:a,transition:b,reverse:d,backDestination:h.backDestination,noHashChange:h.noHashChange,intent:h.intent||{},positiveNavigate:!0,calledBeforeRouteChange:!0,inNavigation:!0},i().fail(function(){console.error("before route change call, failed.")}).always(function(){if(c.isRouting()&&!c.s_lastNavigateInfo.noHashChange){if(h.subFlow)switch(h.subFlow.operation){case"begin":c.beginSubFlow(h.subFlow);break;case"end":return void c.endSubFlow(h);default:console.warn("unknown subFlow.operation. operation: "+h.subFlow.operation)}c.s_router.navigate(a,h)}else!function(){var b,d=Backbone.history.getFragment(a);b=c.s_lastNavigateInfo.noHashChange?_.find(c.s_rootContexts,function(a){return a.regexp.test(d)}):_.findWhere(c.s_rootContexts,{route:d}),b&&(a=b.page)}(),c.changePage(a)})}},c.back=function(){if(c.s_lastNavigateInfo.inNavigation)return void console.log("Router.back() called in navigation proc.");if(c.isTopPage()){var a=navigator.app||{};if(a.exitApp)return void a.exitApp()}c.s_lastNavigateInfo={inNavigation:!0,calledBeforeRouteChange:!0},f().then(function(){$.mobile.back()}).fail(function(){console.error("before route change call, failed."),c.s_lastNavigateInfo={}})},c.pushIntent=function(a){c.s_lastIntent=$.extend({},c.s_lastIntent,a)},c.popIntent=function(){var a=c.s_lastIntent;return c.s_lastIntent={},a},c.getQueryParameters=function(){return c.s_lastNavigateInfo.intent&&c.s_lastNavigateInfo.intent.params?c.s_lastNavigateInfo.intent.params.queryParams:null},c.isInSubFlow=function(){var a=c.getJqmHistory().stack,b=_.some(a,function(a){return!!a[c.SUBFLOW_PARAM]});return b},c.fromHashChanged=function(){return c.s_lastNavigateInfo.inNavigation&&null==c.s_lastNavigateInfo.positiveNavigate},c.registerPageStack=function(a,b,d){var e=[],f=!1;return a=a instanceof Array?a:[a],b=null==b?!1:b,function(){for(var b=function(a){var b,d,e=Backbone.history.getFragment(a.route),f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)});return f?(b=c.pathToJqmDataUrl(f.page),d={route:a.route,pageUrl:b,title:a.title,transition:a.transition,url:b}):(console.warn("route is not registered. route: "+a.route),null)},d=0,g=a.length;g>d;d++){var h=b(a[d]);if(!h){f=!0;break}e.push(h)}}(),f?!1:(function(){var a=c.stop(),f=e.length-1,g=e.length-1;c.getJqmHistory().clearForward();for(var h=0,i=f;i>h;h++)location.hash=e[h].route,c.getJqmHistory().stack.push(e[h]),c.getJqmHistory().activeIndex=c.getJqmHistory().stack.length-1;b?(a=!1,c.start({silent:!0}),c.navigate(e[g].route,e[g].transition,!1,d)):(location.hash=e[g].route,c.getJqmHistory().stack.push(e[g]),c.getJqmHistory().activeIndex=c.getJqmHistory().stack.length-1),a&&c.start({silent:!0})}(),!0)},c.customLoadUrl=function(a){var b=c.s_loadUrl(a);return b||c.onRouteFailed(a),b},c.customJqmBack=function(){c.isRouting()?history.back():c.s_back()},c.bindEvents=function(){$(document).one("pagechange",function(){c.s_initOptions.anchorVclick&&$(document).on("vclick","[href]",function(a){c.onAnchorVclicked(a)})}).on("pagebeforeshow",function(a){if(null!=c.s_lastNavigateInfo.backDestination){var b=c.getJqmHistory().getActive();b[c.BACK_DESTINATION_URL]=c.s_lastNavigateInfo.backDestination}}).on("pageshow",function(a){var b=c.getJqmHistory().getActive();b[c.SUBFLOW_PARAM]&&delete b[c.SUBFLOW_PARAM]}).on("pagechange pagecontainerloadfailed",function(a){c.s_lastNavigateInfo={}}),a.setBackButtonHandler(c.back)},c.pushContext=function(a,b){return c.s_rootContexts[a]?(console.log("logic error. route is already registered. name: "+a),!1):(c.s_rootContexts[a]=b,!0)},c.initFirstPageIfNeeded=function(a){return $.mobile.autoInitializePage?!1:($(document).one("pagebeforechange",function(c,d){d.toPage=b.toUrl(a)}),$.mobile.initializePage(),$.mobile.autoInitializePage=!0,!0)},c.isTopPage=function(){var a=Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash),b=_.find(c.s_rootContexts,function(b){return b.regexp.test(a)});return null==b?!1:b.top},c.onAnchorVclicked=function(a){return c.isJustBeforeVclicked()?(a.preventDefault(),!1):c.followAnchor(a)},c.followAnchor=function(a){var b=$(a.currentTarget),d=b.jqmData("href")||b.attr("href"),e=b.jqmData("transition"),f=b.jqmData("direction"),g=b.attr(c.DATA_BACK_DESTINATION),h=b.attr(c.DATA_NO_HASH_CHANGE)?"true"===b.attr(c.DATA_NO_HASH_CHANGE):!1,i=b.attr(c.DATA_NO_VCLICK_HANDLE)?"true"===b.attr(c.DATA_NO_VCLICK_HANDLE):!1;return i||c.needDefaultOperation(d)?!0:(a.preventDefault(),c.isBackButtonClicked(a)?c.back():c.navigate(d,e,!!f,{noHashChange:h,backDestination:g}),!1)},c.needDefaultOperation=function(a){return a&&"#"!==a?"#"===a[0]?!c.canResolveRoute(a):!1:!0},c.canResolveRoute=function(a){var b=Backbone.history.getFragment(a);return _.any(Backbone.history.handlers,function(a){return a.route.test(b)?!0:void 0})},c.isJustBeforeVclicked=function(){var a=Date.now()-c.s_lastClickedTime<2*c.DELAY_TIME;return c.s_lastClickedTime=Date.now(),a},c.isBackButtonClicked=function(a){return"back"===$(a.currentTarget).jqmData("rel")?!0:!1},c.onRouteSucceeded=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var e=c.s_rootContexts[a];if(e){var f={params:{queryParams:b}};c.s_lastNavigateInfo.inNavigation=!0,null!=c.s_lastNavigateInfo.intent&&(f.params=$.extend({},f.params,c.s_lastNavigateInfo.intent.params||{})),c.s_lastNavigateInfo.intent=$.extend({},c.s_lastNavigateInfo.intent,f);var g=e.callback(b);g||c.changePage(e.page)}},c.onRouteFailed=function(a){if(c.s_lastNavigateInfo.inNavigation=!0,null==a&&(a=Backbone.history.getFragment()),c.s_lastNavigateInfo.positiveNavigate){var b=c.s_rootContexts[a];null==b&&(b={route:a,regexp:c.s_router._routeToRegExp(a),page:c.s_lastNavigateInfo.url,top:!1,callback:null},c.pushContext(a,b))}var d=a;null!=c.s_rootContexts[a]&&(d=c.s_rootContexts[a].page),c.changePage(d)},c.changePage=function(a){var d;if(!c.s_lastNavigateInfo.positiveNavigate){if(c.s_lastNavigateInfo.inAdditionalBack)c.s_lastNavigateInfo.inAdditionalBack=!1;else{c.decideDirection(a);var e=c.detectAdditionalBackDistance();if(e>0)return c.s_lastNavigateInfo.inAdditionalBack=!0,c.getJqmHistory().activeIndex-=e,void history.go(-e)}var h=c.detectSubFlowBaseInfo();h.isCurrent&&delete h.stack[c.SUBFLOW_PARAM]}d=c.s_lastNavigateInfo.calledBeforeRouteChange?g:f,d().then(function(){c.s_lastNavigateInfo.intent&&c.pushIntent(c.s_lastNavigateInfo.intent),c.treatUrlHistory(),$.mobile.changePage(b.toUrl(a),{showLoadMsg:!1,allowSamePageTransition:!0,transition:c.s_lastNavigateInfo.transition||"none",reverse:c.s_lastNavigateInfo.reverse,fromHashChange:!c.s_lastNavigateInfo.positiveNavigate,changeHash:!c.s_lastNavigateInfo.noHashChange})}).fail(function(){console.error("before route change call, failed."),c.s_lastNavigateInfo={}})},c.decideDirection=function(a){c.s_lastNavigateInfo.transition=c.getJqmHistory().getActive().transition;var d=$.mobile.path.convertUrlToDataUrl(b.toUrl(a));c.getJqmHistory().direct({url:d,present:function(a,b){switch(b){case"back":c.s_lastNavigateInfo.reverse=!0;break;case"forward":c.s_lastNavigateInfo.transition=a.transition;break;default:console.log("unknown direction: "+b)}},missing:function(){1===c.getJqmHistory().activeIndex?(c.getJqmHistory().previousIndex=1,c.getJqmHistory().activeIndex=0,c.s_lastNavigateInfo.reverse=!0):0!==c.getJqmHistory().activeIndex&&console.log("unknown direction.")}})},c.detectAdditionalBackDistance=function(){var a,b,d,e,f,g,h=c.getJqmHistory().stack,i=c.getJqmHistory().activeIndex,j=c.getJqmHistory().previousIndex;if(!c.s_lastNavigateInfo.reverse||null==j)return 0;if(b=h[j][c.BACK_DESTINATION_URL],null==b)return 0;if(e=Backbone.history.getFragment(b),""===e)return i;if(f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)}),null==f)return console.warn("back destination is not registered. back-dst: "+b),0;for(g=c.pathToJqmDataUrl(f.page),a=i,d=0;a>=0&&g!==h[a].pageUrl;a--,d++);return 0>a?(console.warn("back destination does not exist in history. back-dst: "+b),0):d},c.beginSubFlow=function(a){var b=c.getJqmHistory().getActive(),d=a;a.destBase?!function(){var b=0,e=Backbone.history.getFragment(a.destBase),f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)});if(null==f)return void console.warn("base destination is not registered. destBase: "+a.destBase);for(var g=c.pathToJqmDataUrl(f.page),h=c.getJqmHistory().stack,i=c.getJqmHistory().activeIndex;i>=0;i--,b++)if(g===h[i].pageUrl){d.additionalDistance=b;break}}():(d.destBase=location.hash,d.additionalDistance=0),b[c.SUBFLOW_PARAM]=d},c.endSubFlow=function(a){var b=$.extend(!0,{},a),d=c.detectSubFlowBaseInfo(),e=$.extend({},d.subFlowParam,b.subFlow),f=d.distance,g=d.stack,h=100,i=10,j=0,k=function(){j>=i?(console.error("reached navigate max retry count."),c.s_lastNavigateInfo={}):e.destBase!==location.hash?(j++,setTimeout(k,h)):(c.s_lastNavigateInfo.inNavigation=!1,c.registerPageStack(e.destStacks,!0,b))};g?(delete g[c.SUBFLOW_PARAM],c.getJqmHistory().activeIndex-=f,c.getJqmHistory().clearForward(),e.destStacks?(c.stop(),history.go(-f),delete b.subFlow,setTimeout(k,0)):(c.s_lastNavigateInfo.positiveNavigate=!1,history.go(-f))):(console.warn("subFlow begin status does not exist in history."),c.s_lastNavigateInfo={})},c.detectSubFlowBaseInfo=function(){var a,b,d,e=c.getJqmHistory().stack,f=c.getJqmHistory().activeIndex,g={};for(g.additionalDistance=0,a=f,b=0;a>=0;a--,b++)if(e[a][c.SUBFLOW_PARAM]){d=e[a],g=e[a][c.SUBFLOW_PARAM];break}return{stack:d,subFlowParam:g,distance:b+g.additionalDistance,isCurrent:function(){return d&&0===b?!0:!1}()}},c.pathToJqmDataUrl=function(a){var c=b.toUrl(a),d=$.mobile.path.convertUrlToDataUrl(c);return d},c.treatUrlHistory=function(){(c.s_lastNavigateInfo.positiveNavigate||history.length<c.getJqmHistory().stack.length)&&c.getJqmHistory().clearForward()},c.getJqmHistory=function(){return $.mobile.navigate.history},c.s_initOptions={},c.s_router=null,c.s_rootContexts={},c.s_lastNavigateInfo={},c.s_lastClickedTime=null,c.s_lastIntent={},c.s_loadUrl=null,c.s_back=null,c.DELAY_TIME=200,c.DATA_BACK_DESTINATION="data-back-dst",c.DATA_NO_HASH_CHANGE="data-no-hash-change",c.DATA_NO_VCLICK_HANDLE="data-no-vclick-handle",c.BACK_DESTINATION_URL="backDstUrl",c.SUBFLOW_PARAM="subFlowParam",c.s_defaultInitOptions={anchorVclick:!0},c.s_defaultNavigateOptions={trigger:!0,replace:!1,intent:null},c}();b.Router=h}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){function b(){var b=$.Deferred();return a.Framework.Platform.Mobile?null==a.global.cordova||null==a.global.cordova.exec?$(document).one("deviceready",function(){b.resolve()}):b.resolve():setTimeout(function(){b.resolve()},100),b.promise()}function c(a){var b=d;return d=a,b}a.waitForDeviceReady=b;var d=null;a.setBackButtonHandler=c,function(){b().done(function(){$(document).on("backbutton",function(a){d&&d(a)})})}();var e;!function(b){function c(c){var d=$.Deferred(),e=j();return k?(console.warn("cdp.framework.jqm is already initialized, ignored."),d.resolve()):(a.initialize().done(function(){return e.applyPatch&&b.Patch.apply(),e.jquery(),a.isAMD()?($(document).on("mobileinit",function(){e.jquerymobile(),$.i18n.init({resGetPath:e.i18nDataPath()}).done(function(){$(document).one("pagebeforechange",function(a,b){b.options.showLoadMsg=!1}).on("pagebeforecreate",function(a){$(a.target).i18n()}),b.Router.initialize({anchorVclick:e.anchorVclick})?(k=!0,d.resolve()):(console.error("error. CDP.Framework.Router.initialize() failed."),d.reject())}).fail(function(){console.error("error. $.i18n.init() failed."),d.reject()})}),void require(["jquery.mobile"])):(console.warn("need to init for 'jquery.mobile', 'i18Next' and 'CDP.Framework.Router' manually, because cdp.framework depends on require.js."),k=!0,d.resolve())}),d.promise())}function d(){return k}function e(a,b){m[a]=b}function f(a){delete m[a]}function g(){!function(){var b=a.setBackButtonHandler(null),c=function(a){l&&l.onHardwareBackButton(a)||b(a)};a.setBackButtonHandler(c)}(),function(){var b=a.Framework.setBeforeRouteChangeHandler(null),c=function(){return l?l.onBeforeRouteChange():b()};a.Framework.setBeforeRouteChangeHandler(c)}()}function h(a){l=a,l&&(n=b.getOrientation())}function i(){return b.Patch.s_vclickEvent}function j(){var b={jquery:function(){$.support.cors=!0,$.ajaxSetup({cache:!1})},jquerymobile:function(){$.mobile.allowCrossDomainPages=!0,$.mobile.defaultPageTransition="none",$.mobile.hashListeningEnabled=!1,$.mobile.pushStateEnabled=!1},i18nDataPath:function(){return""},applyPatch:!0,anchorVclick:!0};return $.extend({},b,a.global.Config)}var k=!1,l=null,m={},n=null;b.initialize=c,b.isInitialized=d,b.registerOrientationChangedListener=e,b.unregisterOrientationChangedListener=f,b.setupEventHandlers=g,b.setActivePage=h,b.getDefaultClickEvent=i,$(window).on("resize",function(a){var c=b.getOrientation();if(n!==c){for(var d in m)m[d].onOrientationChanged(c);l&&l.onOrientationChanged(c),n=c}})}(e=a.Framework||(a.Framework={}))}(a||(a={}));var a;return function(a){var b;!function(a){var b=function(){function b(a,b,c){this._url=a,this._id=b,this._owner=null,this._$page=null,this._$header=null,this._$footer=null,this._intent=null,this._initialized=!1,this.setup(c)}return Object.defineProperty(b.prototype,"active",{get:function(){return!!this._$page&&this._$page.hasClass("ui-page-active")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$page",{get:function(){return this._$page},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$header",{get:function(){return this._$header},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$footer",{get:function(){return this._$footer},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"intent",{get:function(){return this._intent},set:function(a){this._intent=a,this._intent._update=!0},enumerable:!0,configurable:!0}),b.prototype.onOrientationChanged=function(a){this._owner&&this._owner.onOrientationChanged(a)},b.prototype.onHardwareBackButton=function(a){return this._owner?this._owner.onHardwareBackButton(a):!1},b.prototype.onBeforeRouteChange=function(){return this._owner?this._owner.onBeforeRouteChange():$.Deferred().resolve().promise()},b.prototype.onCommand=function(a,b){this._owner&&this._owner.onCommand(a,b)},b.prototype.onInitialize=function(a){this._owner&&this._owner.onInitialize(a)},b.prototype.onPageBeforeCreate=function(a){this._owner&&this._owner.onPageBeforeCreate(a)},b.prototype.onPageInit=function(a){this._owner&&this._owner.onPageInit(a)},b.prototype.onPageBeforeShow=function(a,b){this._owner&&this._owner.onPageBeforeShow(a,b)},b.prototype.onPageShow=function(a,b){this._owner&&this._owner.onPageShow(a,b)},b.prototype.onPageBeforeHide=function(a,b){this._owner&&this._owner.onPageBeforeHide(a,b)},b.prototype.onPageHide=function(a,b){this._owner&&this._owner.onPageHide(a,b)},b.prototype.onPageRemove=function(a){this._owner&&this._owner.onPageRemove(a)},b.prototype.setup=function(b){var c=this;this._initialized=!1,this._intent=null;var d="#"+this._id;$(document).off("pagebeforecreate",d).on("pagebeforecreate",d,function(a){c._$page=$(d).first(),c._$header=c._$page.children(":jqmData(role=header)").first(),c._$footer=c._$page.children(":jqmData(role=footer)").first(),c._$page.on("pagecreate",function(a){c.pageInit(a)}).on("pagebeforeshow",function(a,b){c.pageBeforeShow(a,b)}).on("pageshow",function(a,b){c.pageShow(a,b)}).on("pagebeforehide",function(a,b){c.pageBeforeHide(a,b)}).on("pagehide",function(a,b){c.pageHide(a,b)}).on("pageremove",function(a){c.pageRemove(a)}),c.pageBeforeCreate(a)}),b=b||{},this._owner=b.owner,null==b.route&&(b.route=this._id),a.Router.register(b.route,this._url,b.top,b.callback)},b.prototype.pageBeforeCreate=function(a){this.onPageBeforeCreate(a)},b.prototype.pageInit=function(a){this._initialized||(this.onInitialize(a),this._initialized=!0),this.onPageInit(a)},b.prototype.pageBeforeShow=function(b,c){a.setActivePage(this),this._intent=a.Router.popIntent(),this.onPageBeforeShow(b,c)},b.prototype.pageShow=function(a,b){this.onPageShow(a,b)},b.prototype.pageBeforeHide=function(b,c){this.onPageBeforeHide(b,c),null!=this._intent&&this._intent._update?(delete this._intent._update,a.Router.pushIntent(this._intent)):a.Router.fromHashChanged()&&a.Router.isInSubFlow()&&a.Router.pushIntent(this._intent),this._intent=null,a.setActivePage(null)},b.prototype.pageHide=function(a,b){this.onPageHide(a,b)},b.prototype.pageRemove=function(a){this.onPageRemove(a)},b}();a.Page=b}(b=a.Framework||(a.Framework={}))}(a||(a={})),a.Framework});