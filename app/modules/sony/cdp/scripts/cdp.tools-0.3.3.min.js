/*!
 * cdp.tools.js 0.3.3
 *
 * Copyright 2015 Sony Corporation
 * Released under the MIT license
 *
 * Date: 2015-07-22T16:06:46
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","underscore"],function(c,d){return b(a.CDP||(a.CDP={}),c,d)}):"object"==typeof exports?module.exports=b(a.CDP||(a.CDP={}),require("jquery"),require("underscore")):b(a.CDP||(a.CDP={}),a.jQuery||a.$,a._)}((this||0).self||global,function(a,b,c){a.Tools=a.Tools||{};var a;!function(a){var b;!function(a){a.global=a.global||window}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b;!function(b){function c(){return a.global.BlobBuilder||a.global.WebKitBlobBuilder||a.global.MozBlobBuilder||a.global.MSBlobBuilder}function d(b,d){var e=null,f=c();if(null!=f){var g=new f;g.append(b),e=g.getBlob(d)}else e=new a.global.Blob([b],{type:d});return e}function e(b,d){var e=null,g=c();if(null!=g){var h=new g;h.append(f(b)),e=h.getBlob(d)}else e=new a.global.Blob([f(b)],{type:d});return e}function f(a){for(var b=window.atob(a),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0,f=b.length;f>e;++e)d[e]=b.charCodeAt(e);return c}function g(a){for(var b=window.atob(a),c=new Uint8Array(b.length),d=0,e=b.length;e>d;++d)c[d]=b.charCodeAt(d);return c}function h(a){var b=new Uint8Array(a);return this.uint8ArrayToBase64(b)}function i(a){for(var b="",c=0,d=a.byteLength;d>c;++c)b+=String.fromCharCode(a[c]);return window.btoa(b)}b.arrayBufferToBlob=d,b.base64ToBlob=e,b.base64ToArrayBuffer=f,b.base64ToUint8Array=g,b.arrayBufferToBase64=h,b.uint8ArrayToBase64=i,b.URL=function(){return a.global.URL||a.global.webkitURL}()}(b=a.Blob||(a.Blob={}))}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b="[CDP.Tools.DateTime] ",c=function(){function a(){}return a.computeDate=function(a,b){var c=new Date(a.getTime()),d=c.getTime(),e=864e5*b,f=d+e;return c.setTime(f),c},a.convertISOStringToDate=function(a){var b,c,d,e=a.split("T"),f=e[0].split("-");return e[1]&&(b=e[1].split(":"),c=b[2].split(".")),d=b?new Date(f[0],f[1]-1,f[2],b[0],b[1],c[0],c[1]):f[2]?new Date(f[0],f[1]-1,f[2]):f[1]?new Date(f[0],f[1]-1):new Date(f[0])},a.convertDateToISOString=function(c,d){void 0===d&&(d="msec");var e;switch(d){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(b+"unknown target: "+d),d="msec"}return e=c.getFullYear(),"year"===d?e:(e+="-"+a.numberToDoubleDigitsString(c.getMonth()+1),"month"===d?e:(e+="-"+a.numberToDoubleDigitsString(c.getDate()),"date"===d?e:(e+="T"+a.numberToDoubleDigitsString(c.getHours()),"hour"===d?e:(e+=":"+a.numberToDoubleDigitsString(c.getMinutes()),"min"===d?e:(e+=":"+a.numberToDoubleDigitsString(c.getSeconds()),"sec"===d?e:e+="."+String((c.getMilliseconds()/1e3).toFixed(3)).slice(2,5))))))},a.convertFileSystemStringToDate=function(a){var b,c,d=a.split("T"),e=d[0].split("_");return d[1]&&(b=d[1].split("_")),c=b?new Date(e[0],e[1]-1,e[2],b[0],b[1],b[2],b[3]):e[2]?new Date(e[0],e[1]-1,e[2]):e[1]?new Date(e[0],e[1]-1):new Date(e[0])},a.convertDateToFileSystemString=function(c,d){void 0===d&&(d="msec");var e;switch(d){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(b+"unknown target: "+d),d="msec"}return e=c.getFullYear(),"year"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getMonth()+1),"month"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getDate()),"date"===d?e:(e+="T"+a.numberToDoubleDigitsString(c.getHours()),"hour"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getMinutes()),"min"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getSeconds()),"sec"===d?e:e+="_"+String((c.getMilliseconds()/1e3).toFixed(3)).slice(2,5))))))},a.numberToDoubleDigitsString=function(a){return 0>a||a>100?null:10>a?"0"+a:""+a},a}();a.DateTime=c}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var c;!function(a){function c(a){return a>=0?a:-a}function d(a,b){return a>=b?a:b}function e(a,b){return b>=a?a:b}function f(a,c){void 0===c&&(c=0);var d=b.Deferred(),e=function(){a()?d.resolve():setTimeout(e,c)};return setTimeout(e,c),d.promise()}function g(b,c){var d="";return b=Number(b),isNaN(b)||isNaN(c)||0>=c?null:(0>b&&(b=a.abs(b),d="-"),d+(Array(c).join("0")+b).slice(-c))}function h(a,c){function d(){this.constructor=a}var e=a.prototype;d.prototype=c.prototype,a.prototype=new d,b.extend(a.prototype,e)}function i(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.forEach(function(b){Object.getOwnPropertyNames(b.prototype).forEach(function(c){a.prototype[c]=b.prototype[c]})})}function j(){var a,b=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;return null==window.devicePixelRatio||b?window.matchMedia?(a="(-webkit-min-device-pixel-ratio: 1.5),                    (min--moz-device-pixel-ratio: 1.5),                    (-o-min-device-pixel-ratio: 3/2),                    (min-resolution: 1.5dppx)",window.matchMedia(a).matches?1.5:(a="(-webkit-min-device-pixel-ratio: 2),                    (min--moz-device-pixel-ratio: 2),                    (-o-min-device-pixel-ratio: 2/1),                    (min-resolution: 2dppx)",window.matchMedia(a).matches?2:(a="(-webkit-min-device-pixel-ratio: 0.75),                    (min--moz-device-pixel-ratio: 0.75),                    (-o-min-device-pixel-ratio: 3/4),                    (min-resolution: 0.75dppx)",window.matchMedia(a).matches?.7:void 0))):1:window.devicePixelRatio}function k(a,c){var d=b.Deferred();if(!a)return d.reject("null argument");var e;switch(typeof a){case"object":e=a;break;case"string":try{e=new Worker(a)}catch(f){return console.error(l+f),d.reject(f)}break;default:return d.reject("invalid type argument")}return e.onerror=function(a){return d.reject(a)},e.onmessage=function(a){return d.resolve(a.data)},e.postMessage(c),d.promise()}var l="[CDP.Tools.Functions] ";a.abs=c,a.max=d,a.min=e,a.await=f,a.toZeroPadding=g,a.inherit=h,a.mixin=i,a.getDevicePixcelRatio=j,a.doWork=k}(c=a.Tools||(a.Tools={}))}(a||(a={}));var a;return function(a){var d;!function(a){var d="[CDP.Tools.Template] ",e=function(){function e(){}return e.getTemplateElement=function(a,c){var f=e.getElementMap(),g=f[a];try{if(!g){if(c){var h=e.findHtmlFromSource(c);g=b(h).find(a)}else g=b(a);if(0>=g)throw"invalid [key, src] = ["+a+", "+c+"]";f[a]=g}}catch(i){return console.error(d+i),null}return g},e.empty=function(){e._mapElement=null,e._mapSource=null},e.getJST=function(b,d){var e,f=this.getTemplateElement(b,d),g=null;return null!=a.global.Hogan?(g=Hogan.compile(f.text()),e=function(a){return g.render(a)}):(g=c.template(f.html()),e=function(a){return g(a).replace(/\n|\t/g,"")}),e},e.getElementMap=function(){return e._mapElement||(e._mapElement={}),e._mapElement},e.getSourceMap=function(){return e._mapSource||(e._mapSource={}),e._mapSource},e.findHtmlFromSource=function(a){var c=e.getSourceMap(),d=c[a];return d||(b.ajax({url:a,method:"GET",async:!1,dataType:"html",success:function(a){d=a},error:function(a,b){throw"ajax request failed. status: "+b}}),c[a]=d),d},e}();a.Template=e}(d=a.Tools||(a.Tools={}))}(a||(a={})),a.Tools});